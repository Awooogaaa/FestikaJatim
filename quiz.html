<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuis Angkasa - ‚úïpace</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #000;
            color: #fff;
            text-align: center;
            overflow-x: hidden;
        }

        /* --- NAVIGASI (DESKTOP) --- */
        nav {
            display: flex;
            justify-content: space-between; /* Logo di kiri */
            align-items: center;
            padding: 28px 60px;
            position: relative; /* Penting untuk centering menu */
            z-index: 100;
        }

        .logo {
            font-size: 22px;
            font-weight: 600;
            letter-spacing: -0.5px;
            text-decoration: none;
            color: #fff;
            z-index: 101; /* Pastikan logo di atas layer menu */
        }

        .nav-links {
            display: flex;
            gap: 40px;
            list-style: none;
            
            /* Trik membuat menu tepat di tengah layar (Desktop) */
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        .nav-links a {
            color: #6b6b6b;
            text-decoration: none;
            font-size: 15px;
            transition: color 0.3s ease;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: #fff;
        }

        /* --- BACKGROUND & ANIMASI --- */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #fff;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 0.8; }
        }

        .page-title {
            margin-top: 40px;
            font-size: 32px;
            font-weight: 500;
            color: #eee;
        }

        .page-title p {
            font-size: 16px;
            font-weight: 300;
            color: #6b6b6b;
        }

        /* Floating Objects Animation */
        .floating-objects {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 1;
        }

        .floating-planet {
            position: absolute;
            border-radius: 50%;
            opacity: 0.6;
            animation: float 20s infinite ease-in-out;
        }

        .planet-1 { animation-delay: 0s; }
        .planet-2 { top: 20%; right: 10%; animation-delay: 5s; }
        .planet-3 { bottom: -5%; left: 10%; animation-delay: 7s; }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0) rotate(0deg); }
            25% { transform: translateY(-30px) translateX(20px) rotate(50deg); }
            50% { transform: translateY(-60px) translateX(0) rotate(0deg); }
            75% { transform: translateY(-30px) translateX(-20px) rotate(50deg); }
        }

        /* --- QUIZ CONTAINER --- */
        .quiz-wrapper {
            background: linear-gradient(135deg, rgba(30, 30, 40, 0.95), rgba(20, 20, 30, 0.95));
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.15);
            border-radius: 30px;
            padding: 40px;
            max-width: 700px;
            margin: 40px auto;
            text-align: left;
            position: relative;
            z-index: 10;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.1) inset;
            transition: all 0.4s ease;
            animation: slideIn 0.6s ease-out;
        }

        .quiz-wrapper:hover {
            transform: translateY(-8px);
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.7), 0 0 0 1px rgba(255, 255, 255, 0.2) inset, 0 0 40px rgba(102, 126, 234, 0.3);
            border-color: rgba(102, 126, 234, 0.4);
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        #score-container {
            font-size: 18px;
            color: #a0a0a0;
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            margin-top: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        #question-container {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 30px;
            line-height: 1.5;
            color: #f0f0f0;
        }

        #options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.15);
            color: #fff;
            padding: 18px 24px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            text-align: left;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .option-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .option-btn:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateX(5px);
        }

        .option-btn:hover::before {
            left: 100%;
        }

        .option-btn.correct {
            background: linear-gradient(135deg, #37b24d, #2f9e44);
            border-color: #2f9e44;
            color: #fff;
            animation: correctPulse 0.5s ease;
        }

        .option-btn.wrong {
            background: linear-gradient(135deg, #f03e3e, #d9480f);
            border-color: #d9480f;
            color: #fff;
            animation: wrongShake 0.5s ease;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }

        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .option-btn:disabled {
            cursor: not-allowed;
        }

        /* Fakta Unik Box */
        .fun-fact-reveal {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(118, 75, 162, 0.15));
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 20px;
            padding: 25px;
            margin-top: 25px;
            animation: factSlideIn 0.6s ease-out;
            position: relative;
            overflow: hidden;
        }

        .fun-fact-reveal::before {
            content: 'üí°';
            position: absolute;
            top: -10px;
            right: -10px;
            font-size: 80px;
            opacity: 0.1;
        }

        @keyframes factSlideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fun-fact-reveal h3 {
            color: #a78bfa;
            font-size: 18px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .fun-fact-reveal p {
            color: #d0d0d0;
            line-height: 1.7;
            font-size: 15px;
        }

        #feedback {
            font-size: 20px;
            font-weight: 600;
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        #next-btn {
            position: relative;
            text-decoration: none;
            color: #fff;
            background: linear-gradient(45deg, #0ce39a, #69007f, #fc0987);
            padding: 14px 25px;
            border-radius: 10px;
            font-size: 1.25em;
            cursor: pointer;
            top: 70px;
            border: none;
        }

        #next-btn:hover {
            transform: scale(1.05);
        }

        footer {
            margin: 50px 0 30px 0;
            font-size: 0.9em;
            color: #6b6b6b;
            position: relative;
            z-index: 10;
        }

        /* --- CSS TOMBOL SUARA --- */
        .voice-control-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: rgba(255, 255, 255, 0.9);
            font-size: 24px;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .voice-control-btn:hover {
            transform: scale(1.1);
            background: #fff;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.6);
        }

        .voice-control-btn.muted {
            background: rgba(100, 100, 100, 0.8);
            color: #ccc;
        }

        /* --- RESPONSIVE MOBILE/TABLET --- */
        @media (max-width: 768px) {
            nav {
                padding: 15px 20px;
                flex-direction: column; /* Logo atas, Menu bawah */
                gap: 15px;
            }

            .logo { 
                font-size: 24px; 
            }

            .nav-links {
                /* Reset posisi absolute agar menu tidak menumpuk di mobile */
                position: static;
                transform: none;
                
                display: flex;
                gap: 20px;
                justify-content: center;
                width: 100%;
                flex-wrap: wrap;
            }

            .quiz-wrapper {
                padding: 25px;
                /* Tambahkan margin top agar konten tidak tertutup navbar yang tinggi */
                margin: 40px 20px 20px 20px; 
            }

            #question-container {
                font-size: 20px;
            }

            .floating-planet {
                display: none; /* Sembunyikan dekorasi berat di mobile */
            }
        }
    </style>
</head>

<body>
    <div class="stars" id="stars"></div>
    <div class="floating-objects">
        <div class="floating-planet planet-1">
            <img src="images/kuis/astronot.png" alt=""
                style="width: 250px; height: 400px; margin-top: 200px; margin-left: 80px;">
        </div>
        <div class="floating-planet planet-2">
            <img src="images/kuis/saturn.png" alt=""
                style="width: 250px; height: 400px; margin-top: 200px; margin-left: 80px;">
        </div>
        <div class="floating-planet planet-3">
            <img src="images/kuis/roket.png" alt=""
                style="width: 250px; height: 400px; margin-top: 200px; margin-left: 80px;">
        </div>
    </div>

    <nav>
        <a href="landing_page.html" class="logo">Galaxy</a>
        <ul class="nav-links">
            <li><a href="landing_page.html">Jelajahi</a></li>
            <li><a href="planet.html">Tatanan</a></li>
            <li><a href="quiz.html" class="active">Kuis</a></li>
        </ul>
    </nav>

    <div class="page-title">
        <h1>Kuis Angkasa</h1>
        <p>Uji pengetahuanmu tentang tata surya!</p>
    </div>

    <main>
        <div class="quiz-wrapper">
            <div id="score-container">
                <span>Skor: <strong>0</strong></span>
                <span>Pertanyaan <strong id="current-q">1</strong> dari <strong id="total-q">5</strong></span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div id="question-container">Memuat pertanyaan...</div>
            <div id="options-container"></div>
            <div id="feedback"></div>
            <div id="fun-fact-container"></div>
            <button id="next-btn">
                <span>Pertanyaan Berikutnya ‚Üí</span>
            </button>
        </div>
    </main>

    <footer>
        <p>¬© 2025 STIKA JATIM | Festival Teknologi Informasi dan Komunikasi Pendidikan</p>
    </footer>

    <button id="voiceToggleBtn" class="voice-control-btn" title="Hidupkan/Matikan Suara">üîä</button>

    <script>
        // Bintang
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 150; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            starsContainer.appendChild(star);
        }

        // Data Pertanyaan
        const allQuestions = [
            {
                question: "Planet apakah yang dikenal sebagai 'Kembaran Jahat' Bumi dan merupakan planet terpanas di tata surya?",
                options: ["Merkurius", "Venus", "Mars", "Jupiter"],
                answer: "Venus",
                funFact: "Venus memiliki suhu permukaan sekitar 465¬∞C - cukup panas untuk melelehkan timah! Atmosfernya yang tebal mengandung 96% karbon dioksida."
            },
            {
                question: "Gunung berapi terbesar di tata surya, Olympus Mons, berada di planet mana?",
                options: ["Bumi", "Jupiter", "Mars", "Saturnus"],
                answer: "Mars",
                funFact: "Olympus Mons tingginya mencapai 21 kilometer - hampir 3 kali tinggi Gunung Everest! Luasnya setara dengan negara Prancis."
            },
            {
                question: "Planet mana yang memiliki 'Bintik Merah Raksasa', sebuah badai kolosal yang lebih besar dari Bumi?",
                options: ["Jupiter", "Saturnus", "Neptunus", "Uranus"],
                answer: "Jupiter",
                funFact: "Bintik Merah Raksasa adalah badai antisiklon yang telah berlangsung setidaknya selama 350 tahun! Angin di dalamnya bertiup hingga 640 km/jam."
            },
            {
                question: "Planet mana satu-satunya yang memiliki kepadatan lebih ringan dari air (akan mengapung di bak mandi raksasa)?",
                options: ["Bumi", "Venus", "Saturnus", "Mars"],
                answer: "Saturnus",
                funFact: "Saturnus memiliki kepadatan rata-rata hanya 0.687 g/cm¬≥, sedangkan air memiliki kepadatan 1 g/cm¬≥. Ini karena Saturnus sebagian besar terdiri dari gas."
            },
            {
                question: "Satu hari di planet ini DUA KALI lebih lama dari satu tahunnya. Planet apakah ini?",
                options: ["Merkurius", "Neptunus", "Bumi", "Jupiter"],
                answer: "Merkurius",
                funFact: "Satu hari di Merkurius (rotasi penuh) membutuhkan waktu 59 hari Bumi, sementara satu tahunnya (mengelilingi Matahari) hanya 88 hari Bumi."
            },
            {
                question: "Planet mana yang memiliki angin tercepat di tata surya dengan kecepatan mencapai 2.100 km/jam?",
                options: ["Jupiter", "Saturnus", "Uranus", "Neptunus"],
                answer: "Neptunus",
                funFact: "Angin di Neptunus adalah yang tercepat di tata surya, mencapai 2.100 km/jam - lebih cepat dari kecepatan suara!"
            },
            {
                question: "Planet mana yang memiliki sumbu rotasi paling miring sehingga hampir 'berbaring' saat mengelilingi Matahari?",
                options: ["Mars", "Jupiter", "Uranus", "Saturnus"],
                answer: "Uranus",
                funFact: "Uranus memiliki kemiringan sumbu 98 derajat! Akibatnya, kutub Uranus mengalami siang dan malam yang masing-masing berlangsung selama 42 tahun!"
            },
            {
                question: "Berapa lama waktu yang dibutuhkan cahaya Matahari untuk sampai ke Bumi?",
                options: ["8 detik", "8 menit", "8 jam", "8 hari"],
                answer: "8 menit",
                funFact: "Cahaya Matahari membutuhkan waktu sekitar 8 menit 20 detik untuk mencapai Bumi meskipun bergerak dengan kecepatan 300.000 km/detik!"
            },
            {
                question: "Berapa banyak bulan yang dimiliki Mars?",
                options: ["Tidak ada", "1 bulan", "2 bulan", "4 bulan"],
                answer: "2 bulan",
                funFact: "Mars memiliki dua bulan kecil bernama Phobos dan Deimos. Phobos mengorbit sangat dekat dengan Mars dan akan jatuh ke planet tersebut suatu saat nanti."
            },
            {
                question: "Planet mana yang memiliki musim terpanjang di tata surya?",
                options: ["Bumi", "Mars", "Neptunus", "Jupiter"],
                answer: "Neptunus",
                funFact: "Karena Neptunus membutuhkan 165 tahun Bumi untuk mengelilingi Matahari, satu musimnya berlangsung selama lebih dari 40 tahun!"
            }
        ];

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // === LOGIKA SUARA & TOMBOL (UPDATED) ===
        const synth = window.speechSynthesis;
        const voiceBtn = document.getElementById('voiceToggleBtn');
        
        let isVoiceOn = localStorage.getItem('voiceState') !== 'off';

        function updateVoiceUI() {
            if (isVoiceOn) {
                voiceBtn.textContent = 'üîä';
                voiceBtn.classList.remove('muted');
            } else {
                voiceBtn.textContent = 'üîá';
                voiceBtn.classList.add('muted');
                synth.cancel();
            }
        }

        // Event Listener Tombol: Baca Ulang Saat Dinyalakan
        voiceBtn.addEventListener('click', () => {
            isVoiceOn = !isVoiceOn;
            localStorage.setItem('voiceState', isVoiceOn ? 'on' : 'off');
            updateVoiceUI();

            // JIKA SUARA DINYALAKAN: BACA SOAL SAAT INI LANGSUNG
            if (isVoiceOn && quizData.length > 0) {
                const currentQ = quizData[currentQuestionIndex];
                let teksSoal = `Pertanyaan nomor ${currentQuestionIndex + 1}. ${currentQ.question}. Pilihannya adalah: `;
                currentQ.options.forEach((opt) => {
                    teksSoal += `${opt}. `;
                });
                bicara(teksSoal);
            }
        });

        updateVoiceUI();

        window.addEventListener('beforeunload', () => {
            synth.cancel();
        });

        function bicara(teks) {
            if (!isVoiceOn) return;

            if (synth.speaking) {
                synth.cancel();
            }
            
            const ucapan = new SpeechSynthesisUtterance(teks);
            ucapan.lang = 'id-ID';
            ucapan.rate = 0.9;
            synth.speak(ucapan);
        }

        // Logika Kuis
        let quizData = [];
        const questionEl = document.getElementById('question-container');
        const optionsContainerEl = document.getElementById('options-container');
        const nextBtnEl = document.getElementById('next-btn');
        const feedbackEl = document.getElementById('feedback');
        const scoreEl = document.getElementById('score-container');
        const funFactContainerEl = document.getElementById('fun-fact-container');
        const progressFillEl = document.getElementById('progress-fill');
        const currentQEl = document.getElementById('current-q');
        const totalQEl = document.getElementById('total-q');

        let currentQuestionIndex = 0;
        let score = 0;

        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            if (typeof allQuestions !== 'undefined' && allQuestions.length > 0) {
                 quizData = shuffleArray(allQuestions).slice(0, 5);
                 quizData = quizData.map(q => ({
                    ...q,
                    options: shuffleArray(q.options)
                }));
            } else {
                quizData = [];
                questionEl.innerText = "Data pertanyaan tidak ditemukan.";
                return;
            }

            updateScoreDisplay();
            totalQEl.innerText = quizData.length;
            nextBtnEl.innerText = "Pertanyaan Berikutnya";
            nextBtnEl.style.display = 'none';
            showQuestion();
        }

        function updateScoreDisplay() {
            scoreEl.querySelector('strong').innerText = score;
            currentQEl.innerText = currentQuestionIndex + 1;
            const progress = ((currentQuestionIndex + 1) / quizData.length) * 100;
            progressFillEl.style.width = progress + '%';
        }

        function showQuestion() {
            feedbackEl.innerText = "";
            funFactContainerEl.innerHTML = "";
            nextBtnEl.style.display = 'none';
            optionsContainerEl.innerHTML = "";

            const currentQuestion = quizData[currentQuestionIndex];
            questionEl.innerText = currentQuestion.question;
            updateScoreDisplay();

            // SUARA: Bacakan soal dan pilihan jawaban
            let teksSoal = `Pertanyaan nomor ${currentQuestionIndex + 1}. ${currentQuestion.question}. Pilihannya adalah: `;
            currentQuestion.options.forEach((opt) => {
                teksSoal += `${opt}. `;
            });
            bicara(teksSoal);

            currentQuestion.options.forEach(option => {
                const button = document.createElement('button');
                button.innerText = option;
                button.classList.add('option-btn');

                button.addEventListener('click', () => {
                    selectAnswer(button, option, currentQuestion.answer, currentQuestion.funFact);
                });

                optionsContainerEl.appendChild(button);
            });
        }

        function selectAnswer(selectedButton, selectedOption, correctAnswer, funFact) {
            Array.from(optionsContainerEl.children).forEach(button => {
                button.disabled = true;
                if (button.innerText === correctAnswer) {
                    button.classList.add('correct');
                }
            });

            if (selectedOption === correctAnswer) {
                feedbackEl.innerText = "üéâ Benar!";
                feedbackEl.style.color = "#40c057";
                selectedButton.classList.add('correct');
                score++;
                updateScoreDisplay();
                
                const responBenar = `Jawaban kamu Benar! Fakta uniknya: ${funFact}`;
                bicara(responBenar);
            } else {
                feedbackEl.innerText = `‚ùå Salah. Jawaban yang benar adalah ${correctAnswer}.`;
                feedbackEl.style.color = "#f03e3e";
                selectedButton.classList.add('wrong');
                
                const responSalah = `Jawaban kamu Salah. Jawaban yang benar adalah ${correctAnswer}. Fakta uniknya: ${funFact}`;
                bicara(responSalah);
            }

            const factBox = document.createElement('div');
            factBox.className = 'fun-fact-reveal';
            factBox.innerHTML = `<h3>üí° Fakta Unik</h3><p>${funFact}</p>`;
            funFactContainerEl.appendChild(factBox);
            nextBtnEl.style.display = 'block';
        }

        function handleNextButton() {
            currentQuestionIndex++;
            if (currentQuestionIndex < quizData.length) {
                showQuestion();
            } else {
                const skorAkhir = `Kuis Selesai. Skor akhir Anda adalah ${score} dari ${quizData.length}.`;
                bicara(skorAkhir);

                questionEl.innerText = `üéä Kuis Selesai!`;
                optionsContainerEl.innerHTML = `
                    <div style="text-align: center; padding: 30px; font-size: 18px;">
                        <p style="margin-bottom: 15px;">Skor akhir Anda:</p>
                        <p style="font-size: 48px; font-weight: bold; background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin: 20px 0;">${score} / ${quizData.length}</p>
                        <p style="color: #a0a0a0;">${score === quizData.length ? 'Sempurna! Anda benar-benar ahli angkasa! üöÄ' : score >= 3 ? 'Bagus! Pengetahuan Anda tentang tata surya cukup baik! ‚≠ê' : 'Tetap semangat! Terus belajar tentang angkasa! üåü'}</p>
                    </div>
                `;
                feedbackEl.innerText = "";
                funFactContainerEl.innerHTML = "";
                nextBtnEl.innerText = "üîÑ Mulai Lagi";
            }
        }

        nextBtnEl.addEventListener('click', () => {
            if (currentQuestionIndex < quizData.length) {
                handleNextButton();
            } else {
                startQuiz();
            }
        });

        startQuiz();
    </script>
</body>

</html>